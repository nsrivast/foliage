<html>
<head>
  <title>Foliage</title><!--This is title of the page-->

	<link rel="stylesheet" type="text/css" href="./main.css">
	<script type="text/javascript" src="./jquery.min.js"></script>
	<script type="text/javascript" src="./all_dates.js"></script>
</head>


<body>
	
	<p class="about">This is a tool to explore foliage reports, using data from <a href="http://www.foliagenetwork.com/">The Foliage Network</a> - please consider contributing to their free service by donating on their homepage! </p>

	<img id="ne" />
	<img id="mw" />
	<img id="se" />
	
	<div id="buttons"></div>
	

	<script>
	
		window.onload = function() {
			
			function pad(num, size) { return ('0000000' + num).substr(-size); }
			
			var monthLabels = { '10': 'Oct', '11': 'Nov' }
			var currYear = null;
			var currMonth = null;

			var mainDiv = $(document.getElementById("buttons"));
			var yearDiv = $('<div/>');
			var monthDiv = $('<div/>');
			
			for (var i = 0; i < allDates.length; i++) {
			    var date = allDates[i];
					var year = date[0],
							month = pad(date[1], 2),
							day = pad(date[2], 2);
							
					if (month != currMonth) {
						if (currMonth) {
							yearDiv.append(monthDiv);							
						}
						monthLabel = $('<div/>').attr({ 'class': 'monthDiv'}).append(
							$('<span/>').attr({ 'class': 'monthLabel'}).html(year + " " + monthLabels[month])
						);
						monthDiv = $('<div/>').attr({ 'class': 'monthContainer'}).append(monthLabel);
						currMonth = month;
					}

					if (year != currYear) {
						if (currYear) {
							mainDiv.append(yearDiv);							
						}
						yearLabel = $('<span/>').attr({ 'class': 'yearLabel'}).html(year);
						yearDiv = $('<div/>').attr({ 'class': 'yearContainer'}); //.append(yearLabel);
						currYear = year;
					}
										
					var btn = $('<input/>').attr({
						type: 'button',
						value: day,
						id: 'btn_' + year + "_" + month + "_" + day,
						class: 'dateButton'
					});
					btn.data('year', year);
					btn.data('month', month);
					btn.data('day', day);
					
					monthDiv.append(btn);
			}
			yearDiv.append(monthDiv);							
			mainDiv.append(yearDiv);							
			
			changeImage = function(imgID, src) {
		    $("#" + imgID).fadeOut(500, function() {
	        $("#" + imgID).attr("src", src);
		    }).fadeIn(500);
		    return false;
			}

			changeImages = function(desc) {
				changeImage("mw", "imgs/midwest_us_" + desc + "_ld.gif");
				changeImage("se", "imgs/southeast_us_" + desc + "_ld.gif");
				changeImage("ne", "imgs/northeast_us_" + desc + "_ld.gif");
			}
			$(".dateButton").bind('click', function() {
				var btn = $(this);
				var year = btn.data('year'),
						month = btn.data('month'),
						day = btn.data('day');
				var desc = month + "_" + day + "_" + year;
				
				changeImages(desc);						
			});
			
			changeImages("10_05_2015");
			
		};
	</script>

</body>
</html>